<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1850px" preserveAspectRatio="none" style="width:1554px;height:1850px;background:#FFFFFF;" version="1.1" viewBox="0 0 1554 1850" width="1554px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="185" x2="185" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="284" x2="284" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="444" x2="444" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="559" x2="559" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="715.5" x2="715.5" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="831.5" x2="831.5" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1073.5" x2="1073.5" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1193.5" x2="1193.5" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1313.5" x2="1313.5" y1="81.2969" y2="1770.0938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1419.5" x2="1419.5" y1="81.2969" y2="1770.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="77.9951">Usuario</text><ellipse cx="33.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.5,21.5 L33.5,48.5 M20.5,29.5 L46.5,29.5 M33.5,48.5 L20.5,63.5 M33.5,48.5 L46.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="1782.0889">Usuario</text><ellipse cx="33.5" cy="1793.8906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.5,1801.8906 L33.5,1828.8906 M20.5,1809.8906 L46.5,1809.8906 M33.5,1828.8906 L20.5,1843.8906 M33.5,1828.8906 L46.5,1843.8906 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="124" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="131" y="69.9951">Visor de mapas</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="124" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="131" y="1789.0889">Visor de mapas</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54" x="257" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="264" y="69.9951">Proxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54" x="257" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="264" y="1789.0889">Proxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="406" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="413" y="69.9951">Backend</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="406" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="413" y="1789.0889">Backend</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="492" y="17.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="505" y="37.4014">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="518.5" y="53.6982">Entry Point</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="499" y="69.9951">(Spring Security)</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="492" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="505" y="1789.0889">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="518.5" y="1805.3857">Entry Point</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="499" y="1821.6826">(Spring Security)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="667.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="695" y="53.6982">Filtro</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="674.5" y="69.9951">middleware</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="667.5" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="695" y="1789.0889">Filtro</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="674.5" y="1805.3857">middleware</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="774.5" y="17.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="809" y="37.4014">API de</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="783" y="53.6982">configuración</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="781.5" y="69.9951">y autorización</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="774.5" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="809" y="1789.0889">API de</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="783" y="1805.3857">configuración</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="781.5" y="1821.6826">y autorización</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1031.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1038.5" y="53.6982">Utilidades</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1060" y="69.9951">JWT</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1031.5" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1038.5" y="1789.0889">Utilidades</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1060" y="1805.3857">JWT</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1125.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1132.5" y="53.6982">Security Context</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1133.5" y="69.9951">(Spring Security)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1125.5" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1132.5" y="1789.0889">Security Context</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1133.5" y="1805.3857">(Spring Security)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1271.5" y="77.9951">BD SITMUN</text><path d="M1295.5,29 C1295.5,19 1313.5,19 1313.5,19 C1313.5,19 1331.5,19 1331.5,29 L1331.5,55 C1331.5,65 1313.5,65 1313.5,65 C1313.5,65 1295.5,65 1295.5,55 L1295.5,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1295.5,29 C1295.5,39 1313.5,39 1313.5,39 C1313.5,39 1331.5,39 1331.5,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1271.5" y="1782.0889">BD SITMUN</text><path d="M1295.5,1795.3906 C1295.5,1785.3906 1313.5,1785.3906 1313.5,1785.3906 C1313.5,1785.3906 1331.5,1785.3906 1331.5,1795.3906 L1331.5,1821.3906 C1331.5,1831.3906 1313.5,1831.3906 1313.5,1831.3906 C1313.5,1831.3906 1295.5,1831.3906 1295.5,1821.3906 L1295.5,1795.3906 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1295.5,1795.3906 C1295.5,1805.3906 1313.5,1805.3906 1313.5,1805.3906 C1313.5,1805.3906 1331.5,1805.3906 1331.5,1795.3906 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="1365.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1372.5" y="69.9951">BD Protegida</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="1365.5" y="1769.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1372.5" y="1789.0889">BD Protegida</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="1356.5" x="2" y="91.2969"/><path d="M2,91.2969 L70,91.2969 L70,98.2969 L60,108.2969 L2,108.2969 L2,91.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="15" y="105.3638">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="194" x="583.25" y="123.4355">Proceso de login y config. inicial</text><line style="stroke:#181818;stroke-width:1.0;" x1="183.5" x2="173.5" y1="156.5313" y2="152.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="183.5" x2="173.5" y1="156.5313" y2="160.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="184.5" y1="156.5313" y2="156.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="40.5" y="151.4653">Información privada</text><line style="stroke:#181818;stroke-width:1.0;" x1="282" x2="272" y1="203.7969" y2="199.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="282" x2="272" y1="203.7969" y2="207.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="185.5" x2="283" y1="203.7969" y2="203.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="192.5" y="198.731">DoTask</text><path d="M289,169.5313 L289,224.5313 L703,224.5313 L703,179.5313 L693,169.5313 L289,169.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M693,169.5313 L693,179.5313 L703,179.5313 L693,169.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393" x="295" y="186.5981">GET /proxy/{appId}/{terId}/{type}/{typeId}?{taskParams}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="295" y="201.731">Host: proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="295" y="216.8638">Authorization: Bearer TokenJWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="326" y1="270.2617" y2="270.2617"/><line style="stroke:#181818;stroke-width:1.0;" x1="326" x2="326" y1="270.2617" y2="283.2617"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="326" y1="283.2617" y2="283.2617"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="283.2617" y2="279.2617"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="283.2617" y2="287.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="291" y="265.1958">Comprueba cache</text><path d="M420,234.9297 L420,304.9297 L741,304.9297 L741,244.9297 L731,234.9297 L420,234.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M731,234.9297 L731,244.9297 L741,244.9297 L731,234.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="426" y="251.9966">Se comprueba primero que no hay en la cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="426" y="267.1294">una respuesta anterior del backend que sea</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="426" y="282.2622">válida y que se pueda usar para configurar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="426" y="297.395">la petición</text><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="432.957" y2="428.957"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="432.957" y2="436.957"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="443" y1="432.957" y2="432.957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="291" y="427.8911">GetConfiguration</text><path d="M449,315.4609 L449,536.4609 L675,536.4609 L675,325.4609 L665,315.4609 L449,315.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M665,315.4609 L665,325.4609 L675,325.4609 L665,315.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="455" y="332.5278">POST /api/config/proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="455" y="347.6606">Host: backend</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="455" y="362.7935">X-sitmun-proxy: MiddlewareKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="455" y="377.9263">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="463" y="393.0591">&quot;type&quot; : &quot;{type}&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="463" y="408.1919">&quot;typeId&quot; : {typeId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="463" y="423.3247">&quot;terrId&quot; : {terrId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="463" y="438.4575">&quot;appId&quot; : {appId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="463" y="453.5903">&quot;method&quot; : &quot;GET&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="463" y="468.7231">&quot;parameters&quot; : {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="479" y="483.856">taskParams</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="463" y="498.9888">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="463" y="514.1216">&quot;token&quot; : &quot;{tokenJWT}&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="455" y="529.2544">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="547" y1="548.3203" y2="544.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="547" y1="548.3203" y2="552.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="558" y1="548.3203" y2="548.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="714" x2="704" y1="577.4531" y2="573.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="714" x2="704" y1="577.4531" y2="581.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="559" x2="715" y1="577.4531" y2="577.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="566" y="572.3872">Filtra petición</text><line style="stroke:#181818;stroke-width:1.0;" x1="716" x2="758" y1="621.7188" y2="621.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="758" x2="758" y1="621.7188" y2="634.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="717" x2="758" y1="634.7188" y2="634.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="717" x2="727" y1="634.7188" y2="630.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="717" x2="727" y1="634.7188" y2="638.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="723" y="601.52">MiddlewareKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="723" y="616.6528">conocida?</text><path d="M831,601.5195 L831,626.5195 L1070,626.5195 L1070,611.5195 L1060,601.5195 L831,601.5195 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1060,601.5195 L1060,611.5195 L1070,611.5195 L1060,601.5195 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="837" y="618.5864">Si no se verifica 401 Unauthorized</text><line style="stroke:#181818;stroke-width:1.0;" x1="1191.5" x2="1181.5" y1="663.8516" y2="659.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="1191.5" x2="1181.5" y1="663.8516" y2="667.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="716" x2="1192.5" y1="663.8516" y2="663.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="723" y="658.7856">set(Autenticación(&quot;proxy&quot;, [PROXY]))</text><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="677.8516" y2="673.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="677.8516" y2="681.8516"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="715" y1="677.8516" y2="677.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="1191.5" x2="1181.5" y1="706.9844" y2="702.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="1191.5" x2="1181.5" y1="706.9844" y2="710.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="559" x2="1192.5" y1="706.9844" y2="706.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="566" y="701.9185">contexto seguridad?</text><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="736.1172" y2="732.1172"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="736.1172" y2="740.1172"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="1192.5" y1="736.1172" y2="736.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="576" y="731.0513">contexto actual</text><line style="stroke:#181818;stroke-width:1.0;" x1="559" x2="601" y1="792.0156" y2="792.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="601" x2="601" y1="792.0156" y2="805.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="601" y1="805.0156" y2="805.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="805.0156" y2="801.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="805.0156" y2="809.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="566" y="771.8169">verificar contexto</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="566" y="786.9497">actual tiene rol PROXY</text><path d="M721,749.1172 L721,819.1172 L1007,819.1172 L1007,759.1172 L997,749.1172 L721,749.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M997,749.1172 L997,759.1172 L1007,759.1172 L997,749.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="727" y="766.1841">método asociado a &quot;/api/config/proxy&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="727" y="781.3169">solo puede ser accedido con el rol PROXY</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="727" y="796.4497">por la configuración de seguridad</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="727" y="811.5825">Si no se verifica 401 Unauthorized</text><line style="stroke:#181818;stroke-width:1.0;" x1="829.5" x2="819.5" y1="856.3477" y2="852.3477"/><line style="stroke:#181818;stroke-width:1.0;" x1="829.5" x2="819.5" y1="856.3477" y2="860.3477"/><line style="stroke:#181818;stroke-width:1.0;" x1="559" x2="830.5" y1="856.3477" y2="856.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="566" y="851.2817">getProxyConfiguration(UserRequest)</text><path d="M836,829.6484 L836,869.6484 L1204,869.6484 L1204,839.6484 L1194,829.6484 L836,829.6484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1194,829.6484 L1194,839.6484 L1204,839.6484 L1194,829.6484 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="842" y="846.7153">UserRequest es un objeto con propiedades:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="842" y="861.8481">type, typeId, method, terrId, appId, parameters, token</text><line style="stroke:#181818;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="896.0469" y2="892.0469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="896.0469" y2="900.0469"/><line style="stroke:#181818;stroke-width:1.0;" x1="831.5" x2="1072.5" y1="896.0469" y2="896.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="838.5" y="890.981">Validar token JWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="925.1797" y2="921.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="925.1797" y2="929.1797"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="831.5" x2="1072.5" y1="925.1797" y2="925.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="848.5" y="920.1138">Token OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="954.3125" y2="950.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="954.3125" y2="958.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="831.5" x2="1072.5" y1="954.3125" y2="954.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="838.5" y="949.2466">Extraer &quot;username&quot; del token JWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="983.4453" y2="979.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="983.4453" y2="987.4453"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="831.5" x2="1072.5" y1="983.4453" y2="983.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="848.5" y="978.3794">&quot;username&quot;</text><line style="stroke:#181818;stroke-width:1.0;" x1="831.5" x2="873.5" y1="1024.2109" y2="1024.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="873.5" x2="873.5" y1="1024.2109" y2="1037.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="873.5" y1="1037.2109" y2="1037.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1037.2109" y2="1033.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1037.2109" y2="1041.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="838.5" y="1019.145">Identificar qué hay que configurar</text><path d="M1066,996.4453 L1066,1051.4453 L1406,1051.4453 L1406,1006.4453 L1396,996.4453 L1066,996.4453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1396,996.4453 L1396,1006.4453 L1406,1006.4453 L1396,996.4453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1072" y="1013.5122">Decodificamos userRequest.type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="1072" y="1028.645">en este caso es &quot;task:{taskType}&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="319" x="1072" y="1043.7778">y taskType es el &quot;id&quot; de pregunta a base de datos</text><line style="stroke:#181818;stroke-width:1.0;" x1="1311.5" x2="1301.5" y1="1118.8086" y2="1114.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="1311.5" x2="1301.5" y1="1118.8086" y2="1122.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="831.5" x2="1312.5" y1="1118.8086" y2="1118.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="838.5" y="1098.6099">Recuperar configuración según</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="838.5" y="1113.7427">qué hay que configurar</text><path d="M1318,1061.8438 L1318,1146.8438 L1547,1146.8438 L1547,1071.8438 L1537,1061.8438 L1318,1061.8438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1537,1061.8438 L1537,1071.8438 L1547,1071.8438 L1537,1061.8438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1324" y="1078.9106">buscamos información para</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1324" y="1094.0435">User = username</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1324" y="1109.1763">Territory = userRequest.terrId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1324" y="1124.3091">Application = userRequest.appId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1324" y="1139.4419">Task = userRequest.typeId</text><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1203.9063" y2="1199.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1203.9063" y2="1207.9063"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="831.5" x2="1312.5" y1="1203.9063" y2="1203.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="848.5" y="1168.5747">Configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="848.5" y="1183.7075">sin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="848.5" y="1198.8403">refinar</text><line style="stroke:#181818;stroke-width:1.0;" x1="831.5" x2="873.5" y1="1263.3047" y2="1263.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="873.5" x2="873.5" y1="1263.3047" y2="1276.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="873.5" y1="1276.3047" y2="1276.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1276.3047" y2="1272.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="832.5" x2="842.5" y1="1276.3047" y2="1280.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="838.5" y="1227.9731">Refinar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="838.5" y="1243.106">configuración según</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="838.5" y="1258.2388">qué hay que configurar</text><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="1376.5352" y2="1372.5352"/><line style="stroke:#181818;stroke-width:1.0;" x1="560" x2="570" y1="1376.5352" y2="1380.5352"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="830.5" y1="1376.5352" y2="1376.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="576" y="1356.3364">Configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="576" y="1371.4692">pedida (JSON)</text><path d="M836,1289.3047 L836,1435.3047 L1218,1435.3047 L1218,1299.3047 L1208,1289.3047 L836,1289.3047 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1208,1289.3047 L1208,1299.3047 L1218,1299.3047 L1208,1289.3047 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="842" y="1306.3716">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="858" y="1321.5044">&quot;type&quot;: &quot;datasource&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="858" y="1336.6372">&quot;payload&quot;: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="866" y="1351.77">&quot;url&quot;: &quot;jdbc:mysql://127.0.0.1:3306/db_example&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="866" y="1366.9028">&quot;username&quot;: &quot;user&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="866" y="1382.0356">&quot;password&quot;: &quot;password&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="337" x="866" y="1397.1685">&quot;sql&quot;: &quot;SELECT * FROM Parcelas WHERE territory=32&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="858" y="1412.3013">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="842" y="1427.4341">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="445" x2="455" y1="1476.7656" y2="1472.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="445" x2="455" y1="1476.7656" y2="1480.7656"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="444" x2="558" y1="1476.7656" y2="1476.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="461" y="1456.5669">Configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="461" y="1471.6997">pedida (JSON)</text><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1521.0313" y2="1517.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1521.0313" y2="1525.0313"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="443" y1="1521.0313" y2="1521.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="301" y="1500.8325">Configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="301" y="1515.9653">pedida (JSON)</text><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="326" y1="1580.4297" y2="1580.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="326" x2="326" y1="1580.4297" y2="1593.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="326" y1="1593.4297" y2="1593.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1593.4297" y2="1589.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1593.4297" y2="1597.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="291" y="1545.0981">Interpreta la respuesta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="291" y="1560.231">como una pregunta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="291" y="1575.3638">a base de datos</text><line style="stroke:#181818;stroke-width:1.0;" x1="1418" x2="1408" y1="1622.5625" y2="1618.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="1418" x2="1408" y1="1622.5625" y2="1626.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="1419" y1="1622.5625" y2="1622.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="291" y="1617.4966">Connect and Query (sqlinfo)</text><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1651.6953" y2="1647.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1651.6953" y2="1655.6953"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="1419" y1="1651.6953" y2="1651.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="301" y="1646.6294">Resultset</text><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="326" y1="1680.8281" y2="1680.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="326" x2="326" y1="1680.8281" y2="1693.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="326" y1="1693.8281" y2="1693.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1693.8281" y2="1689.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="285" x2="295" y1="1693.8281" y2="1697.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="291" y="1675.7622">JSON = Resulset2JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="196.5" y1="1722.9609" y2="1718.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="186.5" x2="196.5" y1="1722.9609" y2="1726.9609"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="185.5" x2="283" y1="1722.9609" y2="1722.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="202.5" y="1717.895">JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="34.5" x2="44.5" y1="1752.0938" y2="1748.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="34.5" x2="44.5" y1="1752.0938" y2="1756.0938"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33.5" x2="184.5" y1="1752.0938" y2="1752.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="50.5" y="1747.0278">respuesta</text><!--SRC=[bLTBRzj64BxpLmnugLqeKHv52n18WiHM4YLDv4foag8kYXMvjZUbkFHocLWr_6DwpBctNlt7-iqkAJvaAMaCHEIyTXxVp0w_exSJEfWSZe8W4B7LXewBKXYbWrmOgsALYynI-4uLO2MIbY8NHKYYe8DKoSnsnOwClbmvhdlgCf-9-4-P9OvTFNS5dfRs72PLBApIsKasognPqP5McJt9zcQvKTaPpMHS6cLN-yvELyKfEFckuUSgjKRJIRPKIPBApy98f_rc_SeIqlJSEHeZufCirjcfEYkDYDNDFt1hHQ94ejHVdk2JKSkm6r3iMZgsAbM9I6HnahrwFtSQ-6LoqPMiesE3LbvkZRj-gyI2H5Yn48L4bWzfDfw_ENxhv0uhUgyIXrmVAy_WL5qjAsChaxLyOEGfwKzoZOV1sXP5B1_BGZCWKdscCbgHpz9TKXcE4MaGL7fqv_7Z2YiHZRDJRPO-RuIuFeb419xfv1ng8ZhKSr7y6MHmYemwExS1lHZDQPWpUtWbydoSN0-lK37_kyfbzOFt9rSMoaV2Y6Ln7T1BNU1WfnaukBZASPaYUYPHUaDp3IoY7W4GINneuFneUtIWbxafvK9GBE9psN5j9X5ypKPGImciNPGIfkXSh4XcbDPwL6Q2Z2poKXPM4AeXaIFkh9GMlYUSQY451VJfvc_63RBhQGGrl9Q5C8I22bf3qmHyHYwvniZjRP5KBHVH2saxSEq4SpIP8T4YLqDlUrXbpgUnSZ6W3tSAPPTbTYVt-MawwRM4z5L0H24N90HQGb-XSB2cZXEcrnMhwDAOckuUAxghjYFxkdlgKgAIZXm26fLfpWaOqXHEdcdyhy43K-hZkEYLTrNzhqEM3kYwILzGPSrbSDkmYIZOnd9w_J4JaHj8xNhrHRReTTBi9fEE0P0ddHBIJ37q01Uqhpg5J_J3lVjqd8aA_J9f0hpruDvqYM3BxY547w7pU2zqbGy7zDlHTFBXrz_tzs-njIjhktEsuKBi7pWk09UdwPEW9xJxl9O9N7GbHjHE1xQRgRDgrWPFCc-HB2OPwg1JSadfbcLvyyNg1ASNA9hW1metEYq4_gZGgNQzparlu6ui4mK52186HMEVACVmI5k3m8zMfrYbwNy2OcTI-jTSH6VIkX7JuUmTm-sflE0XjzzDGej3ii0u9BtuAAsF3Hd8bNGNPSHvuFam83yb1kHR7kzkEWp8ZOC1DKqF5dTo4qlVNHT3VV56z4xmT3LUY-b1pVD8sepMtHGqUVqrowDBj3Sg5vO8DuDxePlmttvGetZxKPiQuuIhvd5vKTvySLSFNnlD7K7TKXpAM2TEOwbHYQOmTpdZ482lU8C589QB5V8WZTprEdS37J8hgbzP0Z66Ak5WKKi0CECxZjpI01AM55ryfJhraX7H5CsTI-FRh0rk8FlcN-nXMwBi1hae2n-VwgmUV7bMQAH7L2SRb3d0fR3ThIhoEYKET11uckTfrHmz4OT7De64zBKTX9lGrwlKbl8Vz5REGk4_R6GgGtpV28Yf5-_lhrzDtwRvtUEmxslEiqhGtglPv6sl-UiRsMy6G3clhOKkJIpz3UulyLMgHHAsBd2qWqbP_cEoYAFbghX8e-7m_eEVxjx3t_teuSDxFmwJnH_oKYppjB55hJwgUghDmvTCyLaRFgfvRl5n3BDcevz71tFwdfvF9sy8YqGiK-pCxr-EfYCtZ1nU7Zry45Qgs3hREyJsYTfPotRdSRs7T9RINHeRE-oObqsq9NeoRIsX392bTejftREuptfDsp7M_LHmVcGWOPjDw9TIedVsa3fkEET5LxmJmLGMPMgnNMnwoq6WYvm411xmUotL_gHmzFeJWXdLTqVKHFWV]--></g></svg>